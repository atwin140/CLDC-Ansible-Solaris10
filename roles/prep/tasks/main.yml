- name: Prep
  file: path={{out_file}} state=absent
- file: path={{out_file}} owner=darleya group=14 state=touch


- service: name=svc:/system/system-log:default state=stopped

- name: V-23739 Check
  shell: printf "{" ; /sbin/ifconfig -a | /bin/grep -v 127.0.0.1 | /bin/grep inet | /bin/sort  | /bin/awk '{printf "%s,",$2}'; printf "}"
  args:
    executable: /bin/bash
  register: checkmyconf1
  ignore_errors: True
  changed_when: False

- name: V-23739 Check 2
  shell: printf "{"; /sbin/ifconfig -a | /bin/grep -v 127.0.0.1 | /bin/grep ether | /bin/sort| /bin/awk '{printf "%s, ",$2}'; printf "}"
  args:
    executable: /bin/bash
  register: checkmyconf2
  ignore_errors: True
  changed_when: False


- name: Prep Finding Open Tags
  blockinfile:
    dest: "{{out_file}}"
    state: present
    marker: " "
    block: |
      <ansible hostname="{{ansible_nodename}}" ip_address="{{ checkmyconf1.stdout }}" mac_address="{{ checkmyconf2.stdout }}">
      <stig name="SOLARIS 10 SPARC SECURITY TECHNICAL IMPLEMENTATION GUIDE" version="1" release="17">

 